# 1.扫码获取订单成功
### 1.1原型/效果图
 ![](api/media/15123832325919.jpg)
### 1.2操作流程

### 1.3信息结构
![](api/media/15123840043517.jpg)
### 1.4用例
|用例名称|展开订单明细详情|
|-------|
|行为角色|餐厅顾客|
|需求目的|查看全部明细|
|前置条件|菜品数量>6|
|后置条件|展开明细|

|用例名称|支付|
|-------|
|行为角色|餐厅顾客|
|需求目的|对订单发起支付|
|前置条件|有预支付单数据|
|后置条件|完成支付|


### 1.5退出机制
|操作类型|目标控件|去向|
|-------|
|点击|左上角关闭按钮|返回微信/支付宝|

### 1.6显示及排序机制
|内容控件|加载方式|显示内容|容量|排序机制|刷新机制|新数据加载|
|-------|
|订单明细|SPA异步加载|文字|6/不限|单价倒序|定时刷新|1s更新一次|

### 1.7缓存机制
|缓存控件|缓存内容|容量|
|-------|
|订单明细|文字|all|
>页面打开后，缓存订单明细数据，定时请求数据时，比对缓存中的订单数据，若无变更，则不重新渲染dom，避免部分手机出现页面闪动现象

### 1.8控件描述
|控件描述|控件类型|操作|触发源|触发时|触发后|备注|
|-------|
|标题|label|无|无|无|无|页面标题，`商户名称 秒付` 的格式|
|订单状态|label|无|无|无|无|秒付扫码成功的订单状态统一为`待支付`|
|餐桌名称|label|无|无|无|无|收银软件中设置的餐桌名称|
|明细菜品总数|label|无|无|无|无|-|
|订单总金额|label|无|无|无|无|-|
|明细-菜品标题|label|无|无|无|无|-|
|明细-菜品数量|label|无|无|无|无|-|
|明细-菜品单价|label|无|无|无|无|-|
|明细-展开|button|点击|控件本身|无|展开明细列表|-|
|明细-收起|button|点击|控件本身|无|收起明细列表|-|
|立即支付|button|点击|控件本身|无|调用JSAPI支付|自动识别支付宝微信客户端，调用对应的支付api|
### 1.9临界值和数据验证
> 本页面数据来自第三方收银软件，为保证数据完整性和兼容性，在业务层面不做临界值和数据验证的限制。

### 1.10异常处理
|异常情况|执行操作|处理方式|
|-------|
|无数据|打开页面|显示订单获取失败页面|
|订单不存在|自动刷新|显示订单获取失败页面|
|非微信支付宝扫码打开页面|打开页面|提示只能使用微信或支付宝打开页面|



